<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è —Ç–µ–±—è ‚ù§Ô∏è</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            font-family: 'Arial', sans-serif;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>

<canvas id="loveCanvas"></canvas>

<script>
    const canvas = document.getElementById('loveCanvas');
    const ctx = canvas.getContext('2d');

    let width, height;
    let particles = [];
    let stars = [];
    let heartPoints = [];
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
    const particleColor = '#ff4d85';
    const textColor = '#ff4d85';
    const textStr = 'Te amo';
    let animationTime = 0;

    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        initHeartPoints();
    }

    // –§–æ—Ä–º—É–ª–∞ —Å–µ—Ä–¥—Ü–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—É—Ä–∞
    function initHeartPoints() {
        heartPoints = [];
        const scale = Math.min(width, height) / 30; 
        const centerX = width / 2;
        const centerY = height / 2 - 20;

        for (let i = 0; i < Math.PI * 2; i += 0.05) {
            // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Ä–¥—Ü–∞
            const x = 16 * Math.pow(Math.sin(i), 3);
            const y = -(13 * Math.cos(i) - 5 * Math.cos(2 * i) - 2 * Math.cos(3 * i) - Math.cos(4 * i));
            heartPoints.push({ x: centerX + x * scale, y: centerY + y * scale });
        }
    }

    // –ö–ª–∞—Å—Å –¥–ª—è –∑–≤–µ–∑–¥ –Ω–∞ —Ñ–æ–Ω–µ
    class Star {
        constructor() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.size = Math.random() * 1.5;
            this.alpha = Math.random();
            this.alphaChange = (Math.random() * 0.02) + 0.005;
        }
        update() {
            this.alpha += this.alphaChange;
            if (this.alpha <= 0 || this.alpha >= 1) {
                this.alphaChange *= -1;
            }
        }
        draw() {
            ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    // –ö–ª–∞—Å—Å –¥–ª—è —á–∞—Å—Ç–∏—Ü (–º–∞–ª–µ–Ω—å–∫–∏—Ö —Å–µ—Ä–¥–µ—á–µ–∫/—Ç–æ—á–µ–∫)
    class Particle {
        constructor(startX, startY, isLeft) {
            this.startX = startX;
            this.startY = startY;
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ç–æ—á–∫—É –Ω–∞ –∫–æ–Ω—Ç—É—Ä–µ —Å–µ—Ä–¥—Ü–∞
            const targetPoint = heartPoints[Math.floor(Math.random() * heartPoints.length)];
            this.targetX = targetPoint.x;
            this.targetY = targetPoint.y;

            // –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è –∫—Ä–∏–≤–æ–π –ë–µ–∑—å–µ (—á—Ç–æ–±—ã –æ–Ω–∏ –ª–µ—Ç–µ–ª–∏ –ø–æ –¥—É–≥–µ)
            this.controlX = isLeft ? width / 4 : (width / 4) * 3;
            this.controlY = height / 4;

            this.t = 0; // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—É—Ç–∏ –æ—Ç 0 –¥–æ 1
            this.speed = Math.random() * 0.01 + 0.005;
            this.size = Math.random() * 2 + 1;
            this.finished = false;
        }

        update() {
            if (this.t < 1) {
                this.t += this.speed;
                // –ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è –∫—Ä–∏–≤–∞—è –ë–µ–∑—å–µ
                const u = 1 - this.t;
                this.x = u * u * this.startX + 2 * u * this.t * this.controlX + this.t * this.t * this.targetX;
                this.y = u * u * this.startY + 2 * u * this.t * this.controlY + this.t * this.t * this.targetY;
            } else {
                this.finished = true;
                this.x = this.targetX;
                this.y = this.targetY;
            }
        }

        draw() {
            ctx.fillStyle = particleColor;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    function initStars() {
        for (let i = 0; i < 150; i++) {
            stars.push(new Star());
        }
    }

    function drawCats() {
        ctx.font = '40px Arial';
        ctx.textAlign = 'center';
        // –ö–æ—Ç–∏–∫–∏ –ø–æ —É–≥–ª–∞–º
        ctx.fillText('üê±', 50, height - 30);
        ctx.fillText('üê±', width - 50, height - 30);
    }

    function drawText(opacity) {
        if (opacity <= 0) return;
        ctx.fillStyle = `rgba(255, 77, 133, ${opacity})`;
        ctx.font = 'bold 40px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(textStr, width / 2, height / 2 - (Math.min(width, height) / 30 * 18)); // –¢–µ–∫—Å—Ç –Ω–∞–¥ —Å–µ—Ä–¥—Ü–µ–º
    }

    function animate() {
        ctx.clearRect(0, 0, width, height);
        
        // –†–∏—Å—É–µ–º —Ñ–æ–Ω
        stars.forEach(star => {
            star.update();
            star.draw();
        });

        drawCats();

        // –¶–∏–∫–ª –∞–Ω–∏–º–∞—Ü–∏–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ 600 –∫–∞–¥—Ä–æ–≤ = 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ 60fps)
        animationTime++;
        const cycleLength = 600; 
        const currentCycleTime = animationTime % cycleLength;

        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã –ø–µ—Ä–≤—ã–µ 5 —Å–µ–∫—É–Ω–¥ (300 –∫–∞–¥—Ä–æ–≤)
        if (currentCycleTime < 300) {
            if (currentCycleTime % 2 === 0) { // –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–∞—Å—Ç–∏—Ü
                particles.push(new Particle(50, height - 50, true)); // –û—Ç –ª–µ–≤–æ–≥–æ –∫–æ—Ç–∏–∫–∞
                particles.push(new Particle(width - 50, height - 50, false)); // –û—Ç –ø—Ä–∞–≤–æ–≥–æ –∫–æ—Ç–∏–∫–∞
            }
        } else if (currentCycleTime > 550) {
            // –û—á–∏—â–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º —Ü–∏–∫–ª–æ–º
            particles = [];
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏ —Ä–∏—Å—É–µ–º —á–∞—Å—Ç–∏—Ü—ã
        particles.forEach(p => {
            p.update();
            p.draw();
        });

        // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
        let textOpacity = 0;
        if (currentCycleTime > 200 && currentCycleTime < 500) {
            textOpacity = Math.min(1, (currentCycleTime - 200) / 100);
        } else if (currentCycleTime >= 500 && currentCycleTime <= 550) {
            textOpacity = 1 - ((currentCycleTime - 500) / 50);
        }
        
        draw
